<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>UCify - Premium BGMI UC Store | Fast & Secure UC Delivery</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <meta name="title" content="UCify - Premium BGMI UC Store | Fast & Secure UC Delivery">
  
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* --- CSS REMAINS THE SAME --- */
    :root{
      --bg1:#05050a;--bg2:#0f001a;--bg3:#1a0028;
      --stroke:rgba(255,255,255,.14);--stroke2:rgba(255,255,255,.22);
      --text:#ffffff;--muted:rgba(255,255,255,.78);--muted2:rgba(255,255,255,.62);
      --gold:#ffd700;--gold-bright:#ffed4e;--orange:#ff6b35;--mint:#00ff88;--cyan:#00d9ff;--purple:#b844ff;
      --error:#ff4d4d;--success:#00ff88;
      --shadow-sm:0 10px 26px rgba(0,0,0,.35);
      --shadow-md:0 18px 56px rgba(0,0,0,.48);
      --shadow-lg:0 28px 76px rgba(0,0,0,.62);
      --shadow-glow:0 0 44px rgba(255,215,0,.16);
      --radius:22px;--radius-sm:16px;--radius-xs:14px;
      --step-bg:url('bg1.webp'); 
      --pay-logo-size:52px;
      --pay-card-height:100px;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:Poppins,sans-serif;color:var(--text);
      background:
        radial-gradient(1000px 700px at 15% -5%, rgba(255,215,0,.22), transparent 50%),
        radial-gradient(1000px 700px at 88% 10%, rgba(255,107,53,.20), transparent 50%),
        radial-gradient(900px 600px at 50% 105%, rgba(0,255,136,.14), transparent 50%),
        radial-gradient(800px 500px at 75% 50%, rgba(184,68,255,.12), transparent 55%),
        linear-gradient(145deg, var(--bg1) 0%, var(--bg2) 50%, var(--bg3) 100%);
      background-attachment:fixed;overflow-x:hidden;min-height:100vh;
      -webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;
    }
    input,textarea{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}
    body:before{
      content:"";position:fixed;inset:0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,215,0,.08) 0%, transparent 30%),
        radial-gradient(circle at 80% 70%, rgba(0,217,255,.06) 0%, transparent 30%);
      animation:particleFloat 15s ease-in-out infinite alternate;
      pointer-events:none;z-index:0;
    }
    @keyframes particleFloat{
      0%{transform:translate(0,0) scale(1);}
      50%{transform:translate(30px,-30px) scale(1.08);}
      100%{transform:translate(-20px,20px) scale(.96);}
    }

    .floating-particles{position:fixed;inset:0;pointer-events:none;z-index:1;overflow:hidden;}
    .particle{position:absolute;font-size:24px;opacity:.15;animation:floatParticle 8s ease-in-out infinite;}
    @keyframes floatParticle{
      0%,100%{transform:translateY(0) rotate(0deg);opacity:.15;}
      50%{transform:translateY(-30px) rotate(180deg);opacity:.08;}
    }

    @keyframes gradientShift{
      0%{background-position:0% 50%;}
      50%{background-position:100% 50%;}
      100%{background-position:0% 50%;}
    }

    @keyframes confetti{
      0%{transform:translateY(-100vh) rotate(0deg);opacity:1;}
      100%{transform:translateY(100vh) rotate(720deg);opacity:0;}
    }
    .confetti{position:fixed;width:10px;height:10px;z-index:9999;pointer-events:none;animation:confetti 3s ease-in forwards;}

    .ripple{position:absolute;border-radius:50%;background:rgba(255,255,255,.5);transform:scale(0);animation:rippleEffect .6s ease-out;}
    @keyframes rippleEffect{
      to{transform:scale(4);opacity:0;}
    }

    @keyframes countUp{
      from{opacity:0;transform:translateY(10px);}
      to{opacity:1;transform:translateY(0);}
    }

    .container{max-width:460px;margin:0 auto;padding:20px 16px 80px;min-height:100vh;display:flex;flex-direction:column;gap:16px;position:relative;z-index:1;}
    .top-card{
      border:1.5px solid var(--stroke);
      background:
        linear-gradient(135deg, rgba(255,255,255,.10) 0%, rgba(255,255,255,.04) 100%),
        linear-gradient(225deg, rgba(255,215,0,.07) 0%, transparent 55%);
      backdrop-filter:blur(24px) saturate(1.4);
      -webkit-backdrop-filter:blur(24px) saturate(1.4);
      border-radius:var(--radius);
      padding:22px 18px;
      box-shadow:var(--shadow-lg), inset 0 1px 0 rgba(255,255,255,.15), var(--shadow-glow);
      position:relative;overflow:hidden;
      transform-style:preserve-3d;
      transition:transform .25s ease, box-shadow .25s ease;
    }
    .top-card:hover{transform:translateY(-2px) translateZ(10px);box-shadow:var(--shadow-lg), 0 34px 90px rgba(0,0,0,.65), var(--shadow-glow), inset 0 1px 0 rgba(255,255,255,.20);}
    .header{text-align:center;position:relative;z-index:1;}
    .logo-img{max-width:240px;height:auto;filter:drop-shadow(0 4px 12px rgba(255,215,0,.32));animation:logoGlow 4s ease-in-out infinite alternate;display:inline-block;}
    @keyframes logoGlow{0%{filter:drop-shadow(0 4px 12px rgba(255,215,0,.30));}100%{filter:drop-shadow(0 8px 24px rgba(255,215,0,.50));}}
    .tagline{margin-top:12px;color:var(--muted);font-size:13.5px;font-weight:600;letter-spacing:.2px;text-shadow:0 2px 4px rgba(0,0,0,.3);}

    .partner-block{margin-top:16px;display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center;}
    .partner-badge{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.18);
      background:linear-gradient(135deg, rgba(0,217,255,.10) 0%, rgba(0,0,0,.28) 100%);
      color:rgba(255,255,255,.85);font-size:12px;font-weight:800;letter-spacing:.2px;box-shadow:0 10px 26px rgba(0,0,0,.35);
    }
    .partner-badge i{color:var(--cyan);}

    .trust-strip{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:14px;}
    .trust-pill{display:flex;align-items:center;gap:8px;padding:9px 12px;border-radius:999px;border:1px solid var(--stroke);
      background:linear-gradient(135deg, rgba(0,255,136,.08) 0%, rgba(0,0,0,.30) 100%);
      backdrop-filter:blur(10px);
      color:var(--muted);font-size:12px;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,.25);
      text-shadow:0 1px 2px rgba(0,0,0,.4);
    }

    .live-stats{margin-top:12px;display:flex;justify-content:center;gap:12px;flex-wrap:wrap;}
    .stat-badge{display:flex;align-items:center;gap:6px;padding:8px 12px;border-radius:12px;
      background:linear-gradient(135deg, rgba(255,107,53,.12) 0%, rgba(0,0,0,.30) 100%);
      border:1px solid rgba(255,107,53,.3);
      color:rgba(255,255,255,.9);font-size:11.5px;font-weight:800;
      box-shadow:0 4px 12px rgba(0,0,0,.2);
    }
    .stat-number{color:var(--orange);font-size:13px;font-weight:900;animation:pulse 2s ease-in-out infinite;}
    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:.7;}}

    .progress-wrap{
      border:1.5px solid var(--stroke);
      background:linear-gradient(135deg, rgba(255,255,255,.06) 0%, rgba(255,255,255,.02) 100%);
      backdrop-filter:blur(16px);
      border-radius:var(--radius);
      padding:16px 16px;
      box-shadow:var(--shadow-md), inset 0 1px 0 rgba(255,255,255,.10);
    }
    .progress-container{display:flex;justify-content:space-between;align-items:center;gap:8px;}
    .progress-step{
      width:38px;height:38px;border-radius:50%;
      background:linear-gradient(135deg, rgba(255,255,255,.10) 0%, rgba(255,255,255,.05) 100%);
      border:2px solid var(--stroke);
      display:flex;align-items:center;justify-content:center;
      font-size:13px;font-weight:900;
      transition:all .35s cubic-bezier(.4,0,.2,1);
      z-index:2;position:relative;
      box-shadow:inset 0 2px 8px rgba(0,0,0,.15);
    }
    .progress-step.active{
      background:linear-gradient(135deg, var(--gold-bright) 0%, var(--orange) 100%);
      color:#1a0a00;border-color:transparent;
      box-shadow:0 0 0 4px rgba(255,215,0,.08), 0 10px 30px rgba(255,215,0,.35), inset 0 1px 2px rgba(255,255,255,.5);
      transform:scale(1.08) translateZ(5px);
    }
    .progress-step.completed{background:linear-gradient(135deg, var(--mint) 0%, #00d98f 100%);color:#001a10;border-color:transparent;}
    .progress-line{height:3px;flex:1;background:rgba(255,255,255,.15);border-radius:99px;z-index:1;transition:all .35s ease;}
    .progress-line.active{background:linear-gradient(90deg, var(--gold) 0%, var(--orange) 100%);box-shadow:0 0 16px rgba(255,215,0,.4);}

    .step{display:none;animation:slideInUp .38s cubic-bezier(.4,0,.2,1);}
    .step.active{display:block;}
    @keyframes slideInUp{from{opacity:0;transform:translateY(18px) scale(.985);}to{opacity:1;transform:translateY(0) scale(1);}}

    .step-content{
      border:1.5px solid var(--stroke);
      background:linear-gradient(135deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.03) 100%);
      backdrop-filter:blur(20px) saturate(1.3);
      border-radius:var(--radius);
      padding:20px 18px;
      box-shadow:var(--shadow-lg), inset 0 1px 0 rgba(255,255,255,.12);
      position:relative;overflow:hidden;
    }
    .step-content:before{
      content:"";position:absolute;inset:0;
      background:var(--step-bg) center/cover no-repeat;
      opacity:.22;filter:saturate(1.2) contrast(1.1) brightness(.9);
      transform:scale(1.05);
      z-index:0;
    }
    .step-content>*{position:relative;z-index:1;}

    .step-title{
      font-family:Orbitron,monospace;font-size:22px;font-weight:900;text-align:center;margin-bottom:16px;
      background:linear-gradient(135deg, var(--gold-bright) 0%, var(--orange) 60%, var(--gold-bright) 100%);
      background-size:200% 200%;
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      animation:gradientShift 3s ease infinite;
      text-shadow:0 4px 8px rgba(255,215,0,.3);
    }
    .subnote{text-align:center;color:var(--muted2);font-size:12.5px;margin-top:-8px;margin-bottom:18px;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.4);}

    .packs-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:16px;}
    .pack-card{
      background:linear-gradient(135deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.04) 100%);
      border:1.5px solid rgba(255,255,255,.14);
      border-radius:18px;padding:18px 14px;text-align:center;cursor:pointer;
      transition:all .28s cubic-bezier(.4,0,.2,1);
      position:relative;overflow:hidden;
      backdrop-filter:blur(10px);
      min-height:var(--pay-card-height);
      transform-style:preserve-3d;
    }
    .pack-card:before{
      content:"";position:absolute;inset:0;
      background:linear-gradient(135deg, rgba(255,215,0,.05) 0%, transparent 100%);
      opacity:0;transition:opacity .3s ease;
    }
    .pack-card:hover:not(.purchased){
      transform:translateY(-4px) scale(1.02) translateZ(8px);
      border-color:rgba(255,215,0,.55);
      box-shadow:0 16px 44px rgba(0,0,0,.35), 0 0 30px rgba(255,215,0,.15);
    }
    .pack-card:hover:before{opacity:1;}
    
    .pack-card.selected{
      border-color:rgba(255,215,0,.90);
      background:linear-gradient(135deg, rgba(255,215,0,.16) 0%, rgba(255,107,53,.12) 100%);
      box-shadow:0 14px 46px rgba(255,215,0,.20), 0 0 40px rgba(255,215,0,.2);
      transform:translateY(-4px) scale(1.03) translateZ(10px);
      animation:selectedPulse 2s ease-in-out infinite;
    }
    @keyframes selectedPulse{
      0%,100%{box-shadow:0 14px 46px rgba(255,215,0,.20), 0 0 40px rgba(255,215,0,.2);}
      50%{box-shadow:0 14px 46px rgba(255,215,0,.30), 0 0 50px rgba(255,215,0,.3);}
    }
    .pack-card.selected>.check-mark{
      position:absolute;top:8px;right:8px;width:22px;height:22px;
      background:linear-gradient(135deg, var(--mint) 0%, #00d98f 100%);
      border-radius:50%;display:flex;align-items:center;justify-content:center;
      font-size:12px;font-weight:900;color:#001a10;
      animation:checkPop .4s cubic-bezier(.68,-.55,.265,1.55);
      box-shadow:0 4px 12px rgba(0,255,136,.4);
    }
    .pack-card.purchased{opacity:.5;cursor:not-allowed;pointer-events:none;background:linear-gradient(135deg, rgba(100,100,100,.15) 0%, rgba(50,50,50,.10) 100%);border-color:rgba(150,150,150,.30);}
    .pack-card.purchased:before{
      content:"PURCHASED";position:absolute;top:50%;left:50%;
      transform:translate(-50%,-50%) rotate(-15deg);
      font-size:13px;font-weight:900;color:rgba(255,255,255,.60);
      background:rgba(0,0,0,.70);padding:6px 14px;border-radius:8px;z-index:10;letter-spacing:1px;border:2px solid rgba(255,255,255,.25);
    }

    .pack-uc{display:flex;align-items:center;justify-content:center;gap:9px;font-family:system-ui,-apple-system,sans-serif;font-size:17px;font-weight:900;color:rgba(255,255,255,.95);margin-bottom:8px;}
    .uc-icon{width:34px;height:34px;object-fit:contain;filter:drop-shadow(0 8px 18px rgba(255,215,0,.3));animation:ucFloat 3s ease-in-out infinite;}
    @keyframes ucFloat{
      0%,100%{transform:translateY(0) rotate(0deg);}
      50%{transform:translateY(-4px) rotate(5deg);}
    }
    .pack-price{
      font-family:system-ui,-apple-system,sans-serif;font-size:17px;font-weight:900;
      background:linear-gradient(135deg, var(--gold-bright) 0%, var(--gold) 100%);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      text-shadow:0 2px 4px rgba(255,215,0,.2);
    }

    .form-group{margin-bottom:16px;position:relative;}
    .form-label{display:flex;align-items:center;justify-content:space-between;gap:10px;font-weight:800;margin-bottom:10px;color:rgba(255,255,255,.92);font-size:13.5px;text-shadow:0 1px 2px rgba(0,0,0,.4);}
    .form-input-wrapper{position:relative;display:flex;align-items:center;}
    .form-input{
      width:100%;padding:15px 48px 15px 16px;
      background:rgba(0,0,0,.28);
      border:1.5px solid rgba(255,255,255,.16);
      border-radius:16px;color:#fff;font-size:15px;font-weight:600;outline:none;
      transition:all .25s ease;
      box-shadow:inset 0 2px 8px rgba(0,0,0,.15);
      min-height:56px;
    }
    .form-input:focus{
      border-color:rgba(255,215,0,.78);
      background:rgba(0,0,0,.36);
      box-shadow:0 0 0 4px rgba(255,215,0,.08), inset 0 2px 8px rgba(0,0,0,.2);
      transform:translateY(-1px);
    }
    .form-input.valid{border-color:var(--success);box-shadow:0 0 0 4px rgba(0,255,136,.08), inset 0 2px 8px rgba(0,0,0,.15);}
    .form-input.invalid{border-color:var(--error);box-shadow:0 0 0 4px rgba(255,77,77,.08), inset 0 2px 8px rgba(0,0,0,.15);}
    .input-icon{position:absolute;right:16px;font-size:18px;transition:all .3s ease;pointer-events:none;}
    .input-icon.check{color:var(--success);animation:checkPop .4s cubic-bezier(.68,-.55,.265,1.55);}
    .input-icon.error{color:var(--error);}
    @keyframes checkPop{0%{transform:scale(0) rotate(-180deg);opacity:0;}50%{transform:scale(1.3) rotate(10deg);}100%{transform:scale(1) rotate(0);opacity:1;}}
    .error-message{color:var(--error);font-size:12px;margin-top:6px;font-weight:600;display:none;animation:slideDown .3s ease;}
    @keyframes slideDown{from{opacity:0;transform:translateY(-8px);}to{opacity:1;transform:translateY(0);}}
    .error-message.show{display:block;}

    .hint{color:var(--muted2);font-size:12px;margin-top:10px;line-height:1.45;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.3);}

    .qr-section{margin:16px 0}
    .qr-card{
      border:1.5px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.30);
      border-radius:18px;
      padding:16px 14px;
      backdrop-filter:blur(12px);
      box-shadow:inset 0 2px 8px rgba(0,0,0,.15);
    }
    .qr-title{font-weight:900;color:rgba(255,255,255,.92);font-size:14px;margin-bottom:12px;letter-spacing:.2px;text-align:center;text-shadow:0 2px 4px rgba(0,0,0,.3);}
    
    .qr-skeleton{
      width:204px;height:204px;margin:0 auto 12px;border-radius:16px;
      background:linear-gradient(90deg, rgba(255,255,255,.05) 0%, rgba(255,255,255,.1) 50%, rgba(255,255,255,.05) 100%);
      background-size:200% 100%;
      animation:skeletonLoading 1.5s ease-in-out infinite;
    }
    @keyframes skeletonLoading{
      0%{background-position:200% 0;}
      100%{background-position:-200% 0;}
    }
    
    .qr-box{
      width:204px;height:204px;margin:0 auto 12px;border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      background:rgba(255,255,255,.08);
      border:1.5px solid rgba(255,255,255,.16);
      overflow:hidden;
      box-shadow:0 8px 24px rgba(0,0,0,.3), inset 0 2px 8px rgba(0,0,0,.1);
    }
    .qr-box img{width:100%;height:100%;object-fit:cover;}
    
    .qr-timer{
      text-align:center;margin:8px 0;
      color:var(--orange);font-size:13px;font-weight:900;
      display:flex;align-items:center;justify-content:center;gap:6px;
    }
    .qr-timer i{animation:timerPulse 1s ease-in-out infinite;}
    @keyframes timerPulse{0%,100%{transform:scale(1);}50%{transform:scale(1.1);}}
    
    .upi-row{display:flex;align-items:center;justify-content:center;gap:10px;flex-wrap:wrap;margin-top:6px}
    .upi-label{color:rgba(255,255,255,.70);font-weight:800;font-size:12.5px;text-shadow:0 1px 2px rgba(0,0,0,.3);}
    .upi-id{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
      color:rgba(255,255,255,.92);
      font-weight:900;font-size:13px;
      padding:6px 10px;border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.25);
      box-shadow:inset 0 2px 4px rgba(0,0,0,.2);
    }
    .copy-btn{
      border:none;border-radius:12px;padding:10px 12px;font-weight:900;cursor:pointer;
      color:#130600;background:linear-gradient(135deg,var(--gold-bright) 0,var(--orange) 100%);
      box-shadow:0 10px 26px rgba(255,215,0,.18);
      transition:all .25s ease;
      position:relative;overflow:hidden;
      min-height:48px;
    }
    .copy-btn:before{
      content:"";position:absolute;inset:0;
      background:linear-gradient(135deg, transparent 0%, rgba(255,255,255,.2) 50%, transparent 100%);
      transform:translateX(-100%);
      transition:transform .5s ease;
    }
    .copy-btn:hover:before{transform:translateX(100%);}
    .copy-btn:hover{transform:translateY(-2px);box-shadow:0 12px 30px rgba(255,215,0,.25);}
    .copy-btn:active{transform:scale(.98);}

    .security-badges{display:flex;justify-content:center;gap:8px;margin-top:10px;flex-wrap:wrap;}
    .security-badge{
      display:flex;align-items:center;gap:6px;padding:6px 10px;
      background:rgba(0,255,136,.08);border:1px solid rgba(0,255,136,.25);
      border-radius:8px;font-size:11px;font-weight:800;color:rgba(255,255,255,.85);
    }
    .security-badge i{color:var(--mint);}

    .file-upload-area{
      border:2px dashed rgba(255,215,0,.72);
      border-radius:18px;
      padding:24px 16px;
      text-align:center;
      transition:all .26s ease;
      cursor:pointer;
      background:linear-gradient(135deg, rgba(255,215,0,.10) 0%, rgba(255,215,0,.05) 100%);
      margin:16px 0 12px;
      position:relative;
      min-height:180px;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
    }
    .file-upload-area:hover{
      border-color:rgba(255,215,0,1);
      background:linear-gradient(135deg, rgba(255,215,0,.16) 0%, rgba(255,215,0,.08) 100%);
      transform:translateY(-2px);
      box-shadow:0 8px 24px rgba(255,215,0,.15);
    }
    .file-upload-area.dragover{
      border-color:var(--mint);
      background:linear-gradient(135deg, rgba(0,255,136,.16) 0%, rgba(0,255,136,.08) 100%);
      transform:scale(1.02);
    }
    .upload-progress{position:absolute;bottom:0;left:0;height:4px;background:linear-gradient(90deg, var(--gold-bright) 0%, var(--orange) 100%);border-radius:0 0 18px 18px;width:0;transition:width .3s ease;box-shadow:0 0 10px rgba(255,215,0,.5);}
    .upload-success-icon{font-size:48px;color:var(--success);animation:checkPop .5s cubic-bezier(.68,-.55,.265,1.55);display:none;}
    #screenshotPreview{max-width:100%;max-height:220px;border-radius:16px;margin-top:14px;display:none;border:2px solid rgba(255,255,255,.15);box-shadow:0 8px 24px rgba(0,0,0,.3);}

    .social-proof{
      position:fixed;bottom:20px;left:20px;
      background:linear-gradient(135deg, rgba(0,0,0,.90) 0%, rgba(26,0,40,.90) 100%);
      backdrop-filter:blur(16px);
      border:1.5px solid rgba(255,255,255,.18);
      border-radius:16px;padding:12px 16px;
      box-shadow:0 12px 32px rgba(0,0,0,.5);
      display:none;align-items:center;gap:12px;
      max-width:320px;z-index:1000;
      animation:slideInLeft .4s ease-out;
    }
    @keyframes slideInLeft{
      from{opacity:0;transform:translateX(-100%);}
      to{opacity:1;transform:translateX(0);}
    }
    .social-proof-avatar{
      width:40px;height:40px;border-radius:50%;
      background:linear-gradient(135deg, var(--orange) 0%, var(--purple) 100%);
      display:flex;align-items:center;justify-content:center;
      font-weight:900;color:#fff;font-size:16px;
      box-shadow:0 4px 12px rgba(255,107,53,.3);
    }
    .social-proof-text{flex:1;font-size:12px;line-height:1.4;}
    .social-proof-name{font-weight:800;color:#fff;margin-bottom:2px;}
    .social-proof-action{color:var(--muted);font-weight:600;}
    .social-proof-uc{color:var(--gold-bright);font-weight:800;}

    .btn-row{display:flex;gap:12px;}
    .btn{
      padding:16px 16px;border:none;border-radius:16px;font-size:15px;font-weight:900;cursor:pointer;
      transition:all .26s ease;width:100%;position:relative;min-height:56px;
      overflow:hidden;
      box-shadow:inset 0 1px 2px rgba(255,255,255,.1);
    }
    .btn:before{
      content:"";position:absolute;inset:0;
      background:linear-gradient(135deg, transparent 0%, rgba(255,255,255,.1) 50%, transparent 100%);
      transform:translateX(-100%);
      transition:transform .5s ease;
    }
    .btn:hover:before{transform:translateX(100%);}
    .btn-primary{
      background:linear-gradient(135deg, var(--gold-bright) 0%, var(--orange) 100%);
      color:#1a0800;
      box-shadow:0 12px 32px rgba(255,215,0,.30), inset 0 1px 2px rgba(255,255,255,.3);
    }
    .btn-primary:hover:not(:disabled){transform:translateY(-2px) scale(1.01);box-shadow:0 16px 40px rgba(255,215,0,.35), inset 0 1px 2px rgba(255,255,255,.4);}
    .btn-secondary{background:linear-gradient(135deg, rgba(255,255,255,.09) 0%, rgba(255,255,255,.04) 100%);color:#fff;border:1.5px solid rgba(255,255,255,.16);}
    .btn-secondary:hover:not(:disabled){background:linear-gradient(135deg, rgba(255,255,255,.14) 0%, rgba(255,255,255,.08) 100%);transform:translateY(-2px);}
    .btn:disabled{opacity:.45;cursor:not-allowed;transform:none!important;}
    .btn.loading{pointer-events:none;color:transparent;}
    .btn.loading:after{content:"";position:absolute;width:18px;height:18px;top:50%;left:50%;margin:-9px 0 0 -9px;border:3px solid transparent;border-top-color:currentColor;border-radius:50%;animation:buttonSpin .8s linear infinite;}
    @keyframes buttonSpin{to{transform:rotate(360deg);}}

    .success-screen{text-align:center;padding:32px 12px 12px;}
    .success-icon{font-size:76px;color:var(--mint);margin-bottom:14px;animation:successPop .6s cubic-bezier(.68,-.55,.265,1.55);position:relative;}
    @keyframes successPop{0%{transform:scale(0) rotate(-180deg);opacity:0;}50%{transform:scale(1.2) rotate(10deg);}100%{transform:scale(1) rotate(0);opacity:1;}}
    .success-title{
      font-size:24px;font-weight:900;margin-bottom:10px;
      background:linear-gradient(135deg, var(--mint) 0%, #00d98f 60%, var(--cyan) 100%);
      background-size:200% 200%;
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      animation:gradientShift 3s ease infinite;
    }
    .delivery-badge{
      display:inline-flex;align-items:center;gap:8px;padding:10px 16px;
      background:linear-gradient(135deg, rgba(0,255,136,.15) 0%, rgba(0,217,255,.12) 100%);
      border:1.5px solid rgba(0,255,136,.4);
      border-radius:12px;margin:14px 0;font-weight:800;font-size:13px;
      color:rgba(255,255,255,.95);
      animation:deliveryPulse 2s ease-in-out infinite;
      box-shadow:0 8px 24px rgba(0,255,136,.15);
    }
    @keyframes deliveryPulse{
      0%,100%{box-shadow:0 8px 24px rgba(0,255,136,.15), 0 0 0 0 rgba(0,255,136,.4);}
      50%{box-shadow:0 8px 24px rgba(0,255,136,.25), 0 0 0 8px rgba(0,255,136,0);}
    }

    .receipt-box{
      background:rgba(0,0,0,.35);
      border:1.5px solid rgba(255,255,255,.18);
      border-radius:16px;padding:16px;margin-top:16px;
      text-align:left;
      box-shadow:inset 0 2px 8px rgba(0,0,0,.2);
    }
    .receipt-title{font-weight:900;font-size:14px;color:var(--gold-bright);margin-bottom:12px;display:flex;align-items:center;gap:8px;text-shadow:0 2px 4px rgba(255,215,0,.3);}
    .receipt-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,.1);font-size:13px;}
    .receipt-row:last-child{border-bottom:none;}
    .receipt-label{color:var(--muted2);font-weight:600;}
    .receipt-value{color:rgba(255,255,255,.95);font-weight:800;}

    @media (max-width:480px){
      .container{padding:16px 14px 80px;}
      .logo-img{max-width:200px;}
      :root{--pay-logo-size:48px;--pay-card-height:96px;}
      .social-proof{left:10px;max-width:280px;font-size:11px;}
      body:before{backdrop-filter:blur(12px);}
    }

    .toast{
      position:fixed;top:20px;right:20px;
      background:linear-gradient(135deg, rgba(0,0,0,.90) 0%, rgba(0,26,16,.90) 100%);
      backdrop-filter:blur(16px);
      border:1.5px solid rgba(0,255,136,.4);
      border-radius:12px;padding:12px 16px;
      box-shadow:0 12px 32px rgba(0,0,0,.5);
      display:none;align-items:center;gap:10px;
      z-index:1000;
      animation:slideInRight .4s ease-out;
    }
    @keyframes slideInRight{
      from{opacity:0;transform:translateX(100%);}
      to{opacity:1;transform:translateX(0);}
    }
    .toast.show{display:flex;}
    .toast i{color:var(--mint);font-size:18px;}
    .toast-text{color:#fff;font-size:13px;font-weight:700;}

    #submitBtn { display: none; }
    
    /* --- NEW GAME LOADING BAR CSS --- */
    .game-loader-wrap {
      margin: 20px 0;
      text-align: center;
    }
    .game-bar-bg {
      background: rgba(255,255,255,0.1);
      height: 18px;
      border-radius: 99px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.2);
      position: relative;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    }
    .game-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--gold-bright), var(--orange), var(--gold-bright));
      background-size: 200% 100%;
      width: 0%;
      transition: width 0.5s linear;
      border-radius: 99px;
      animation: gradientShift 2s infinite linear;
      box-shadow: 0 0 10px rgba(255,215,0,0.5);
    }
    .timer-text {
      font-family: 'Orbitron', sans-serif;
      color: var(--gold-bright);
      margin-top: 10px;
      font-size: 15px;
      letter-spacing: 1px;
      text-shadow: 0 0 5px rgba(255,215,0,0.4);
    }
    .delivery-msg {
      font-size: 13px;
      color: var(--muted);
      margin-top: 5px;
      font-weight: 600;
    }
    
    /* Success Message after timer */
    .final-success-msg {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid var(--mint);
      border-radius: 12px;
      color: var(--mint);
      font-weight: 800;
      animation: successPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* Night Message Style */
    .night-msg {
        display: none;
        margin: 20px 0;
        padding: 18px 14px;
        background: rgba(255, 215, 0, 0.08);
        border: 1px solid rgba(255, 215, 0, 0.3);
        border-radius: 14px;
        color: var(--gold-bright);
        font-weight: 600;
        text-align: center;
        line-height: 1.6;
        font-size: 13.5px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }
  </style>
</head>

<body>
  <audio id="bgmAudio" src="bgm.mp3" loop></audio>

  <div class="floating-particles" id="floatingParticles"></div>

  <div class="social-proof" id="socialProof">
    <div class="social-proof-avatar" id="socialAvatar">A</div>
    <div class="social-proof-text">
      <div class="social-proof-name" id="socialName">Anonymous</div>
      <div class="social-proof-action">
        just ordered <span class="social-proof-uc" id="socialUC">660 UC</span>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">
    <i class="fas fa-check-circle"></i>
    <span class="toast-text" id="toastText">Copied!</span>
  </div>

  <div class="container">
    <div class="top-card">
      <div class="header">
        <img src="ucify.webp" alt="UCify Logo" class="logo-img" loading="lazy"> <p class="tagline">Premium BGMI UC â€¢ Lightning-fast delivery</p>

        <div class="partner-block">
          <div class="partner-badge"><i class="fa-solid fa-badge-check"></i> <span>Official Partner</span></div>
          </div>

        <div class="trust-strip">
          <div class="trust-pill"><i class="fa-solid fa-shield-halved"></i><span>Secure</span></div>
          <div class="trust-pill"><i class="fa-solid fa-bolt"></i><span>Fast</span></div>
          <div class="trust-pill"><i class="fa-solid fa-star"></i><span>Trusted</span></div>
        </div>

        <div class="live-stats">
          <div class="stat-badge">
            <i class="fa-solid fa-fire"></i>
            <span><span class="stat-number" id="liveOrders">1425</span> orders today</span>
          </div>
          <div class="stat-badge">
            <i class="fa-solid fa-clock"></i>
            <span>Avg delivery: <span class="stat-number">3 min</span></span>
          </div>
        </div>
      </div>
    </div>

    <div class="progress-wrap">
      <div class="progress-container">
        <div class="progress-step active" data-step="1">1</div>
        <div class="progress-line" id="line1"></div>
        <div class="progress-step" data-step="2">2</div>
        <div class="progress-line" id="line2"></div>
        <div class="progress-step" data-step="3">3</div>
        <div class="progress-line" id="line3"></div>
        <div class="progress-step" data-step="4">4</div>
      </div>
    </div>

    <div id="step1" class="step active">
      <div class="step-content">
        <h2 class="step-title">Enter Details</h2>
        <p class="subnote">Provide accurate information to view packs</p>

        <div class="form-group">
          <label class="form-label">BGMI UID (9-12 digits)</label>
          <div class="form-input-wrapper">
            <input type="tel" class="form-input" id="uid" placeholder="1234567890" maxlength="12" inputmode="numeric">
            <i class="input-icon" id="uidIcon"></i>
          </div>
          <div class="error-message" id="uidError">Please enter a valid 9-12 digit UID</div>
        </div>

        <div class="form-group">
          <label class="form-label">BGMI ID Name</label>
          <div class="form-input-wrapper">
            <input type="text" class="form-input" id="ign" placeholder="Your IGN" maxlength="20">
            <i class="input-icon" id="ignIcon"></i>
          </div>
          <div class="error-message" id="ignError">Please enter your in-game name</div>
        </div>

        <div class="btn-row">
          <button type="button" class="btn btn-primary" id="next1" disabled>Continue to Packs</button>
        </div>
      </div>
    </div>

    <div id="step2" class="step">
      <div class="step-content">
        <h2 class="step-title">Select UC Pack</h2>
        <p class="subnote">Choose your desired pack for <span id="displayUid" style="color:var(--orange);">--</span></p>

        <div class="packs-grid" id="packsGrid">
          <div class="pack-card" data-uc="60" data-price="40">
            <div class="pack-uc"><img src="uc-logo.webp" alt="UC Icon" class="uc-icon" loading="lazy"><span>60 UC</span></div> <div class="pack-price">â‚¹40</div>
          </div>
          <div class="pack-card" data-uc="660" data-price="375">
            <div class="pack-uc"><img src="uc-logo.webp" alt="UC Icon" class="uc-icon" loading="lazy"><span>660 UC</span></div> <div class="pack-price">â‚¹375</div>
          </div>
          <div class="pack-card" data-uc="1800" data-price="950">
            <div class="pack-uc"><img src="uc-logo.webp" alt="UC Icon" class="uc-icon" loading="lazy"><span>1800 UC</span></div> <div class="pack-price">â‚¹950</div>
          </div>
          <div class="pack-card" data-uc="3850" data-price="1710">
            <div class="pack-uc"><img src="uc-logo.webp" alt="UC Icon" class="uc-icon" loading="lazy"><span>3850 UC</span></div> <div class="pack-price">â‚¹1710</div>
          </div>
          <div class="pack-card" data-uc="8100" data-price="3375">
            <div class="pack-uc"><img src="uc-logo.webp" alt="UC Icon" class="uc-icon" loading="lazy"><span>8100 UC</span></div> <div class="pack-price">â‚¹3375</div>
          </div>
          <div class="pack-card" data-uc="16200" data-price="5260">
            <div class="pack-uc"><img src="uc-logo.webp" alt="UC Icon" class="uc-icon" loading="lazy"><span>16200 UC</span></div> <div class="pack-price">â‚¹5260</div>
          </div>
        </div>

        <div class="btn-row">
            <button type="button" class="btn btn-secondary" id="backToDetails">Back</button>
            <button type="button" class="btn btn-primary" id="next2" disabled>Continue to Payment</button>
        </div>
      </div>
    </div>

    <div id="step3" class="step">
      <div class="step-content">
        <h2 class="step-title">Payment</h2>
        <p class="subnote">Scan QR, pay, then upload screenshot</p>

        <div class="pay-box payment-section" style="text-align:center;margin-bottom:16px;">
          <div style="color:rgba(255,255,255,.86);font-weight:900;font-size:16px;margin-bottom:12px;">
            Amount to Pay: <span id="paymentAmount" style="color:var(--gold-bright);font-size:26px;text-shadow:0 4px 8px rgba(255,215,0,.4);animation:countUp .5s ease;">â‚¹0</span>
          </div>

          <div class="qr-section">
            <div class="qr-card">
              <div class="qr-title">ðŸ”’ Scan & Pay (UPI QR)</div>
              <div id="qrLoader" class="qr-skeleton"></div>
              
              <div class="qr-box">
                  <img id="staticQrImage" src="" alt="Scan to Pay" style="display:none; width: 100%; height: 100%; object-fit: contain;">
              </div>

              <div class="qr-timer" id="qrTimer" style="display:none;">
                <i class="fa-solid fa-clock"></i>
                <span>QR valid for <span id="timerDisplay">15:00</span></span>
              </div>

              <div class="upi-row">
                <span class="upi-label">UPI ID:</span>
                <span id="upiIdText" class="upi-id">--</span>
                <button type="button" class="copy-btn" id="copyUpiBtn">
                  <i class="fa-solid fa-copy"></i> Copy
                </button>
              </div>

              <div class="security-badges">
                <div class="security-badge"><i class="fa-solid fa-shield-check"></i><span>SSL Encrypted</span></div>
                <div class="security-badge"><i class="fa-solid fa-lock"></i><span>Secure Payment</span></div>
              </div>

              <div class="hint" id="qrHint">Scan this QR to pay the exact amount shown above.</div>
            </div>
          </div>

          <div style="text-align:left;background:rgba(0,0,0,0.30);padding:12px;border-radius:14px;font-size:13px;color:#ddd;line-height:1.6;border:1px solid rgba(255,255,255,.12);box-shadow:inset 0 2px 4px rgba(0,0,0,.2);">
            <strong style="color:var(--gold-bright);">ðŸ“‹ Instructions</strong><br>
            1. Scan QR and pay the exact amount shown.<br>
            2. Take a screenshot after payment.<br>
            3. Upload screenshot below and place order.
          </div>
        </div>

        <form id="orderForm" name="uc-order" method="POST" enctype="multipart/form-data" data-netlify="true" data-netlify-honeypot="bot-field">
          <input type="hidden" name="form-name" value="uc-order">
          <p style="display:none;">
            <label>Don't fill this out: <input name="bot-field" tabindex="-1" autocomplete="off"></label>
          </p>

          <input type="hidden" name="packuc" id="packuc">
          <input type="hidden" name="packprice" id="packprice">
          <input type="hidden" name="bgmiuid" id="bgmiuid">
          <input type="hidden" name="ign" id="ignfield">
          <input type="hidden" name="time" id="timefield">
          <input type="hidden" name="orderid" id="orderidfield">

          <div class="file-upload-area" id="uploadArea">
            <i class="fas fa-cloud-upload-alt upload-success-icon" id="uploadSuccessIcon"></i>
            <i class="fas fa-cloud-upload-alt" id="uploadIcon" style="font-size:48px;color:var(--gold);margin-bottom:12px;"></i>
            <p style="font-weight:900;font-size:15px;" id="uploadText">ðŸ“¸ Upload Payment Screenshot</p>
            <div class="hint" id="uploadHint">Drag & drop or click â€¢ JPG, PNG, WEBP under 5MB</div>
            <input type="file" id="screenshot" name="paymentscreenshot" accept=".jpg,.jpeg,.png,.webp,image/jpeg,image/png,image/webp" style="display:none;" required>
            <img id="screenshotPreview" alt="Payment Preview">
            <div class="upload-progress" id="uploadProgress"></div>
          </div>

          <div class="btn-row">
            <button type="button" class="btn btn-secondary" id="back3">Back</button>
            <button type="submit" class="btn btn-primary" id="submitBtn">
              <i class="fa-solid fa-rocket"></i> Place Order
            </button>
          </div>
        </form>
      </div>
    </div>

    <div id="step4" class="step">
      <div class="step-content success-screen">
        <div class="success-icon"><i class="fas fa-check-circle"></i></div>
        <h2 class="success-title">Order Received!</h2>
        
        <div class="game-loader-wrap" id="gameLoaderWrap">
            <div class="game-bar-bg">
                <div class="game-bar-fill" id="gameBarFill"></div>
            </div>
            <div class="timer-text">Estimated Time: <span id="deliveryTimer">07:00</span></div>
            <div class="delivery-msg" id="deliveryMsg">Verifying Payment & Processing...</div>
        </div>

        <div class="night-msg" id="nightMessage">
             <i class="fas fa-moon" style="font-size:20px; margin-bottom:8px;"></i><br>
             Order placed successfully!<br>
             Instant delivery is currently paused for the night.<br>
             Your UC will be credited to your account shortly after <strong>9:00 AM</strong>.
        </div>

        <div class="final-success-msg" id="finalSuccessMsg">
             <i class="fa-solid fa-check-double"></i> Your UC has been successfully added to your BGMI account.
        </div>

        <div style="margin-top:12px;">
          <div style="font-weight:900;color:rgba(255,255,255,.95);font-size:15px;">
            Order ID: <span id="orderIdText" style="color:var(--gold-bright);font-family:monospace;cursor:pointer;" onclick="copyOrderId()">--</span>
            <button onclick="copyOrderId()" style="background:none;border:none;color:var(--gold);cursor:pointer;margin-left:6px;" title="Copy Order ID">
              <i class="fa-solid fa-copy"></i>
            </button>
          </div>
        </div>

        <div class="receipt-box">
          <div class="receipt-title"><i class="fas fa-receipt"></i> Payment Receipt</div>
          <div class="receipt-row"><span class="receipt-label">Pack</span><span class="receipt-value" id="receipt-pack">--</span></div>
          <div class="receipt-row"><span class="receipt-label">Amount Paid</span><span class="receipt-value" id="receipt-amount">--</span></div>
          <div class="receipt-row"><span class="receipt-label">BGMI UID</span><span class="receipt-value" id="receipt-uid">--</span></div>
          <div class="receipt-row"><span class="receipt-label">IGN</span><span class="receipt-value" id="receipt-ign">--</span></div>
          <div class="receipt-row"><span class="receipt-label">Order Time</span><span class="receipt-value" id="receipt-time">--</span></div>
          <div class="receipt-row"><span class="receipt-label">Status</span><span class="receipt-value" style="color:var(--mint);">âœ“ Processing</span></div>
        </div>

        <div style="margin-top:16px;" id="newOrderBtnWrap">
          <button type="button" class="btn btn-primary" onclick="location.reload()" id="newOrderBtn" style="display:none;">
            <i class="fa-solid fa-plus"></i> Place New Order
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- GOOGLE SHEETS BACKEND CONFIGURATION ---
    // PASTE YOUR WEB APP URL HERE AFTER DEPLOYING APPS SCRIPT
    const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxZmmaWlqrx9ydYVfO3XkZKh25Oxa_k0XiLNBPbEVEBOwZTlE2qPxF6OEoU-I9oJzLj/exec"; 
    // Example: "https://script.google.com/macros/s/XXXXX/exec"

    let currentStep = 1;
    let selectedPack = null;
    let screenshotFile = null;
    let orderId = null;
    let qrTimer = null;
    let timerSeconds = 900;
    let currentUid = "";
    let currentIgn = "";

    const UPIVPA = "ucify@ptaxis";
    const UPI_NAME = "UCify";

    // --- BGM AUDIO SETUP (UPDATED: 50% CAP) ---
    const bgm = document.getElementById('bgmAudio');
    bgm.volume = 0.5; // Cap at 50%

    function initAudio() {
        if(bgm.paused) {
            bgm.play().catch(e => console.log("Audio waiting for interaction"));
        }
    }
    // Play audio on first user interaction anywhere
    document.body.addEventListener('click', initAudio, { once: true });
    document.body.addEventListener('touchstart', initAudio, { once: true });

    // Stop audio when tab/browser is closed or hidden
    document.addEventListener("visibilitychange", function() {
        if (document.hidden) {
            bgm.pause();
        } else {
            // Only try to resume if user had interacted before
            bgm.play().catch(e => console.log("Waiting for user focus"));
        }
    });


    function initParticles(){
      const container = document.getElementById('floatingParticles');
      for(let i = 0; i < 8; i++){
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.innerHTML = 'ðŸ’Ž';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 5 + 's';
        particle.style.animationDuration = (8 + Math.random() * 4) + 's';
        container.appendChild(particle);
      }
    }

    function createConfetti(){
      const colors = ['#ffd700', '#ff6b35', '#00ff88', '#00d9ff', '#b844ff'];
      for(let i = 0; i < 50; i++){
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDuration = (2 + Math.random()) + 's';
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3500);
        }, i * 30);
      }
    }

    function createRipple(e){
      const button = e.currentTarget;
      const ripple = document.createElement('span');
      ripple.className = 'ripple';
      const rect = button.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      ripple.style.width = ripple.style.height = size + 'px';
      ripple.style.left = e.clientX - rect.left - size/2 + 'px';
      ripple.style.top = e.clientY - rect.top - size/2 + 'px';
      button.appendChild(ripple);
      setTimeout(() => ripple.remove(), 600);
    }

    document.addEventListener('DOMContentLoaded', () => {
      initParticles();
      document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('click', createRipple);
      });
      // Force disable on load to be safe
      document.getElementById('next1').disabled = true;
    });

    const gamingNames = [
        "EagleEye", "ShadowReaper", "GhostKiller", "NinjaBlade", "ThunderGod", "IronFury", "CyberWolf", "DeathStrike", "SoulHunter", "BlazeGamer",
        "ApexPredator", "WildCard", "TitanLord", "VenomSpit", "DarkKnight", "StormBringer", "FrostBite", "RogueOne", "BulletKing", "VikingPower",
        "AlphaWolf", "OmegaRed", "PhoenixRise", "NightMare", "ZeroCool", "SkyWalker", "SilentAssassin", "HyperSpeed", "DragonHeart", "BlackPanther",
        "SniperWolf", "CrazyDog", "MachineGun", "FireStorm", "StarLord", "CaptainKiller", "BadBoyGaming", "LegendWarrior", "KingOfUC", "ProSniper",
        "DeadlyShots", "WarriorSoul", "ImmortalGamer", "GhostRider", "SpeedyGonzales", "TheGodFather", "MatrixReborn", "CyberPunK", "NeonDragon", "SilentKiller"
    ];

    const ucPacksList = ["60 UC", "660 UC", "1800 UC", "3850 UC", "8100 UC", "16200 UC"];

    function showSocialProof(){
      const randomName = gamingNames[Math.floor(Math.random() * gamingNames.length)];
      const randomUC = ucPacksList[Math.floor(Math.random() * ucPacksList.length)];
      const el = document.getElementById('socialProof');
      document.getElementById('socialAvatar').textContent = randomName[0];
      document.getElementById('socialName').textContent = randomName;
      document.getElementById('socialUC').textContent = randomUC;
      el.style.display = 'flex';
      setTimeout(() => {
        el.style.display = 'none';
      }, 5000);
    }

    setInterval(() => {
      if(Math.random() > 0.5) showSocialProof();
    }, 10000);

    // âœ… FIXED TIME FUNCTION (Correctly gets IST Hour as Number 0-23)
    function getIndiaHour(){
      const date = new Date();
      // IST time ka sirf ghanta (hour) nikalega number me (0-23)
      const hourStr = date.toLocaleString("en-US", {timeZone: "Asia/Kolkata", hour: "numeric", hour12: false});
      return parseInt(hourStr);
    }

    function animateLiveOrders(){
      const el = document.getElementById('liveOrders');
      
      let currentOrders = 1000 + Math.floor(Math.random() * 2001);
      el.textContent = currentOrders;

      function updateCounter() {
          currentOrders += 1;
          el.textContent = currentOrders;
          el.style.animation = 'none';
          setTimeout(() => el.style.animation = '', 10);
          let nextInterval = 15000 + Math.floor(Math.random() * 5001);
          setTimeout(updateCounter, nextInterval);
      }
      setTimeout(updateCounter, 15000);
    }

    animateLiveOrders();

    function startQRTimer(){
      const display = document.getElementById('timerDisplay');
      const timerEl = document.getElementById('qrTimer');
      timerEl.style.display = 'flex';
      
      if(qrTimer) clearInterval(qrTimer);
      timerSeconds = 900;
      qrTimer = setInterval(() => {
        timerSeconds--;
        const mins = Math.floor(timerSeconds / 60);
        const secs = timerSeconds % 60;
        display.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
        
        if(timerSeconds <= 0){
          clearInterval(qrTimer);
          display.textContent = 'Expired';
        }
      }, 1000);
    }

    function showToast(message){
      const toast = document.getElementById('toast');
      document.getElementById('toastText').textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    function copyOrderId(){
      const orderIdEl = document.getElementById('orderIdText');
      navigator.clipboard.writeText(orderIdEl.textContent).then(() => {
        showToast('Order ID copied!');
        triggerHaptic('success');
      });
    }

    function triggerHaptic(type='light'){
      if(!navigator.vibrate) return;
      const patterns = { light:[10], medium:[20], heavy:[30], success:[10,20,10] };
      navigator.vibrate(patterns[type] || [10]);
    }

    function generateOrderId(){
      return `UCF-${Date.now().toString().slice(-6)}-${Math.floor(100 + Math.random()*900)}`;
    }

    function showStep(step){
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      document.getElementById(`step${step}`).classList.add('active');
      currentStep = step;
      updateProgress();
    }

    function updateProgress(){
      const steps = document.querySelectorAll('.progress-step');
      const lines = [document.getElementById('line1'), document.getElementById('line2'), document.getElementById('line3')];
      steps.forEach((stepEl, idx) => {
        stepEl.classList.toggle('completed', idx < currentStep - 1);
        stepEl.classList.toggle('active', idx === currentStep - 1);
      });
      lines.forEach((lineEl, idx) => { if(lineEl) lineEl.classList.toggle('active', idx < currentStep - 1); });
    }

    const uidInput = document.getElementById('uid');
    const ignInput = document.getElementById('ign');
    const uidIcon = document.getElementById('uidIcon');
    const ignIcon = document.getElementById('ignIcon');
    const uidError = document.getElementById('uidError');

    // --- PACK CLICK LOGIC (STEP 2) ---
    document.querySelectorAll('.pack-card').forEach(card => {
        card.addEventListener('click', function(){
            if(this.classList.contains('purchased')) return;
            triggerHaptic('light');
            document.querySelectorAll('.pack-card').forEach(c => {
              c.classList.remove('selected');
              c.querySelector('.check-mark')?.remove();
            });
            this.classList.add('selected');
            const checkMark = document.createElement('div');
            checkMark.className = 'check-mark';
            checkMark.innerHTML = 'âœ“';
            this.appendChild(checkMark);
            selectedPack = { uc: this.dataset.uc, price: this.dataset.price };
            document.getElementById('next2').disabled = false;
        });
    });

    // --- STEP 1 LOGIC (Fixed Validation) ---
    function checkStep1Validation() {
        const uidVal = uidInput.value.replace(/\D/g, '');
        const ignVal = ignInput.value.trim();
        const isUidValid = uidVal.length >= 9 && uidVal.length <= 12;
        const isIgnValid = ignVal.length >= 2;
        
        document.getElementById('next1').disabled = !(isUidValid && isIgnValid);
    }

    uidInput.addEventListener('input', function(){
      this.value = this.value.replace(/\D/g, '').slice(0,12);
      const len = this.value.length;
      const isValid = len >= 9 && len <= 12;
      
      if(isValid){
          uidInput.classList.add('valid');
          uidInput.classList.remove('invalid');
          uidIcon.className = 'input-icon check fas fa-check-circle';
          uidError.classList.remove('show');
          triggerHaptic('light');
      } else {
          uidInput.classList.remove('valid');
          uidIcon.className = '';
      }
      checkStep1Validation();
    });

    ignInput.addEventListener('input', function(){
        const isValid = this.value.trim().length >= 2;
        
        if(isValid){
          ignInput.classList.add('valid');
          ignIcon.className = 'input-icon check fas fa-check-circle';
          triggerHaptic('light');
        } else {
          ignInput.classList.remove('valid');
          ignIcon.className = '';
        }
        checkStep1Validation();
    });

    // --- GOOGLE SHEETS FETCH FUNCTION ---
    async function fetchPurchasedPacks(uid) {
        if(!APPS_SCRIPT_URL) return []; // Fallback if no script is set
        try {
            // Add 'no-cors' only if debugging issues, but standard GET usually needs cors handling in script
            const response = await fetch(`${APPS_SCRIPT_URL}?uid=${uid}`);
            const data = await response.json();
            return data.purchased || [];
        } catch (e) {
            console.error("Error fetching history:", e);
            return [];
        }
    }

    // --- BUTTON: CONTINUE TO PACKS (Step 1 -> Step 2) ---
    document.getElementById('next1').onclick = async () => {
        const btn = document.getElementById('next1');
        btn.textContent = "Checking...";
        btn.disabled = true;

        currentUid = uidInput.value;
        currentIgn = ignInput.value;
        document.getElementById('displayUid').textContent = currentUid;

        // Fetch history
        const purchasedPacks = await fetchPurchasedPacks(currentUid);
        
        // Reset Packs
        document.querySelectorAll('.pack-card').forEach(card => {
            card.classList.remove('purchased', 'selected');
            card.querySelector('.check-mark')?.remove();
            
            // Check if bought
            if(purchasedPacks.includes(card.dataset.uc)){
                card.classList.add('purchased');
            }
        });

        btn.textContent = "Continue to Packs";
        btn.disabled = false;
        showStep(2);
    };

    document.getElementById('backToDetails').onclick = () => showStep(1);

    // --- BUTTON: CONTINUE TO PAYMENT (Step 2 -> Step 3) ---
    document.getElementById('next2').onclick = function(){
      const amountEl = document.getElementById('paymentAmount');
      amountEl.textContent = 'â‚¹' + selectedPack.price;
      amountEl.style.animation = 'countUp .5s ease';
      orderId = generateOrderId();
      document.getElementById('upiIdText').textContent = UPIVPA;
      
      const qrImage = document.getElementById('staticQrImage');
      const loader = document.getElementById('qrLoader');
      
      qrImage.style.display = 'none';
      loader.style.display = 'block';

      const qrFilename = `${selectedPack.price}qr.webp`;
      qrImage.src = qrFilename;

      qrImage.onload = function(){
          loader.style.display = 'none';
          qrImage.style.display = 'block';
          startQRTimer();
      };

      qrImage.onerror = function(){
          loader.style.display = 'none';
          alert(`Image missing: ${qrFilename}. Please upload it to your repo.`);
      };

      showStep(3);
    };

    document.getElementById('back3').onclick = () => {
      if(qrTimer) clearInterval(qrTimer);
      showStep(2);
    };

    document.getElementById('copyUpiBtn').onclick = async function(){
      triggerHaptic('light');
      try {
          await navigator.clipboard.writeText(UPIVPA);
          showToast('UPI ID copied!');
          const oldHTML = this.innerHTML;
          this.innerHTML = '<i class="fa-solid fa-check"></i> Copied';
          setTimeout(() => this.innerHTML = oldHTML, 2000);
      } catch (err) { alert("UPI ID: " + UPIVPA); }
    };

    const fileInput = document.getElementById('screenshot');
    const preview = document.getElementById('screenshotPreview');
    const uploadArea = document.getElementById('uploadArea');
    const submitBtn = document.getElementById('submitBtn');

    uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('dragover'); });
    uploadArea.addEventListener('dragleave', () => { uploadArea.classList.remove('dragover'); });
    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
      const file = e.dataTransfer.files[0];
      if(file && file.type.startsWith('image/')) handleFileUpload(file);
    });

    uploadArea.onclick = () => fileInput.click();
    fileInput.onchange = (e) => { const file = e.target.files[0]; if(file) handleFileUpload(file); };

    function handleFileUpload(file){
      if(file.size <= 5*1024*1024){
        screenshotFile = file;
        const reader = new FileReader();
        reader.onload = (evt) => {
          preview.src = evt.target.result;
          preview.style.display = 'block';
          const progressBar = document.getElementById('uploadProgress');
          let width = 0;
          const interval = setInterval(() => {
            if(width >= 100){
              clearInterval(interval);
              document.getElementById('uploadIcon').style.display = 'none';
              document.getElementById('uploadSuccessIcon').style.display = 'block';
              document.getElementById('uploadText').textContent = 'âœ“ Screenshot Ready';
              submitBtn.style.display = 'block';
              triggerHaptic('success');
            } else { width += 5; progressBar.style.width = width + '%'; }
          }, 20);
        };
        reader.readAsDataURL(file);
      } else {
        alert("File too large. Please upload under 5MB.");
      }
    }

    // --- GAME TIMER LOGIC FOR STEP 4 ---
    function startDeliveryTimer() {
        const duration = 420; // 7 minutes in seconds
        let timeLeft = duration;
        const timerText = document.getElementById('deliveryTimer');
        const fillBar = document.getElementById('gameBarFill');
        const msg = document.getElementById('deliveryMsg');
        
        const timerInterval = setInterval(() => {
            timeLeft--;
            
            // Calc minutes and seconds
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            timerText.textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            
            // Calc width percentage
            const percentage = ((duration - timeLeft) / duration) * 100;
            fillBar.style.width = percentage + "%";
            
            // Dynamic Messages
            if(percentage > 20 && percentage < 40) msg.textContent = "Connecting to BGMI Servers...";
            if(percentage > 40 && percentage < 60) msg.textContent = "Verifying UID & Player Name...";
            if(percentage > 60 && percentage < 80) msg.textContent = "Initiating UC Transfer...";
            if(percentage > 80 && percentage < 99) msg.textContent = "Finalizing Transaction...";
            
            if(timeLeft <= 0) {
                clearInterval(timerInterval);
                fillBar.style.width = "100%";
                msg.textContent = "Completed";
                
                // HIDE LOADER, SHOW FINAL MESSAGE & BUTTON
                document.getElementById('gameLoaderWrap').style.display = 'none';
                document.getElementById('finalSuccessMsg').style.display = 'block';
                document.getElementById('newOrderBtn').style.display = 'block'; // Only show this now
                createConfetti();
                triggerHaptic('success');
            }
        }, 1000); // Update every second
    }

    // --- FORM SUBMISSION ---
    document.getElementById('orderForm').onsubmit = async (e) => {
      e.preventDefault();
      if(!screenshotFile) {
          alert("Please upload a payment screenshot first.");
          return;
      }
      submitBtn.disabled = true;
      submitBtn.classList.add('loading');
      const time = new Date().toLocaleString('en-IN', { timeZone:'Asia/Kolkata' });
      
      // Fill hidden fields
      document.getElementById('packuc').value = selectedPack.uc;
      document.getElementById('packprice').value = selectedPack.price;
      document.getElementById('bgmiuid').value = currentUid;
      document.getElementById('ignfield').value = currentIgn;
      document.getElementById('timefield').value = time;
      document.getElementById('orderidfield').value = orderId;

      try {
        // 1. Submit to Netlify (Backend handling form)
        const res = await fetch('/', { method: 'POST', body: new FormData(e.target) });
        
        if(res.ok) {
          // 2. Submit to Google Sheets (Database for duplicate check)
          if(APPS_SCRIPT_URL) {
             try {
                const sheetData = {
                    uid: currentUid,
                    uc: selectedPack.uc
                };
                await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors', 
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(sheetData)
                });
             } catch(sheetErr) {
                 console.log("Sheet save error (non-fatal):", sheetErr);
             }
          }

          document.getElementById('orderIdText').textContent = orderId;
          document.getElementById('receipt-pack').textContent = selectedPack.uc + " UC";
          document.getElementById('receipt-amount').textContent = "â‚¹" + selectedPack.price;
          document.getElementById('receipt-uid').textContent = currentUid;
          document.getElementById('receipt-ign').textContent = currentIgn;
          document.getElementById('receipt-time').textContent = time;
          if(qrTimer) clearInterval(qrTimer);
          
          showStep(4);
          triggerHaptic('success');
          
          // --- TIME CHECK LOGIC (FIXED) ---
          const currentHour = getIndiaHour(); // Returns 0-23
          const isNightTime = (currentHour >= 0 && currentHour < 9); // 12 AM to 9 AM

          if (isNightTime) {
             // SHOW NIGHT MESSAGE, HIDE TIMER
             document.getElementById('gameLoaderWrap').style.display = 'none';
             document.getElementById('nightMessage').style.display = 'block';
             document.getElementById('newOrderBtn').style.display = 'block'; // Allow next order immediately
          } else {
             // START THE 7 MINUTE TIMER LOGIC
             document.getElementById('gameLoaderWrap').style.display = 'block';
             document.getElementById('nightMessage').style.display = 'none';
             startDeliveryTimer();
          }
          
        } else throw new Error();
      } catch(err) {
        alert("Submission failed. Try again.");
        submitBtn.disabled = false;
        submitBtn.classList.remove('loading');
      }
    };
    setTimeout(showSocialProof, 3000);
  </script>
</body>
</html>
